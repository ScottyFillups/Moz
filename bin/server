#!/usr/bin/env node

'use strict'

const port = process.env.PORT || 8080

const app = require('../app')
const http = require('http')
const colyseus = require('colyseus')
const gamify = require('../game')
const { monitor } = require('@colyseus/monitor')

const server = http.createServer(app)
const gameServer = new colyseus.Server({ server })

gamify(gameServer)
app.use('/colyseus', monitor(gameServer))

server.listen(port, () => {
  console.log(`Listening on port ${port}`)
})
